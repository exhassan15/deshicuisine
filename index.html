<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ“ EASY EDIT DATA SECTION - CHANGE YOUR INFO HERE!
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  const ADMIN_PASSWORD = 'admin123';

  const MENU_DATA = {
    wednesday: {
      name: 'Chicken Biryani',
      desc: 'Fragrant basmati rice with tender chicken, aromatic spices, saffron, and fried onions.',
      price: 1299,
      emoji: 'ğŸ›'
    },
    saturday: {
      name: 'Vuna Khicuri with Duck',
      desc: 'Traditional slow-cooked khichuri with caramelized onions and slow-cooked duck.',
      price: 1999,
      emoji: 'ğŸ²'
    }
  };

  const BUSINESS_SETTINGS = {
    businessName: 'Deshi Cuisine',
    phone: '+8108052136996',
    email: 'exhassan15@gmail.com',
    orderDays: 'Wednesday & Saturday'
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ”§ LINE BOT CONFIGURATION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // âœ… YOUR LINE CREDENTIALS ARE NOW CONFIGURED!
  
  const LINE_CONFIG = {
    channelAccessToken: 'ffOCGt8nvbdwqcQHCFCIb6XNQnvGGY/+k3BhGCkukUzYZ9ryfG7aiWEQ/k/Dn/ux2RawmIGPsFTC81y4ZfxV8ig7AYy9boCFkmsXuKThli5P3cAZUwwoGDM1VYoNx8kIEpm2XYumjeQ+YqCpH0C+CwdB04t89/1O/w1cDnyilFU=',
    yourUserId: 'Udbf73a5ee7a12466f96c15e242dbc8d8',
    lineOfficialLink: ''  // Optional: Add your LINE Official Account link here
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // END OF EASY EDIT SECTION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  // Check if LINE is configured
  const isLineConfigured = LINE_CONFIG.channelAccessToken && LINE_CONFIG.yourUserId;

  // Send order notification via LINE
  async function sendLineNotification(order) {
    if (!isLineConfigured) {
      console.log('LINE not configured yet');
      return false;
    }

    const message = `ğŸ½ï¸ **NEW ORDER - DESHI CUISINE** ğŸ‰\n\n` +
      `ğŸ‘¤ **Customer:** ${order.customerName}\n` +
      `ğŸ“ **Phone:** ${order.customerPhone}\n` +
      `ğŸ“§ **Email:** ${order.customerEmail}\n` +
      `ğŸ“… **Delivery Day:** ${order.deliveryDay}\n` +
      `ğŸ“ **Address:**\n${order.deliveryAddress}\n\n` +
      `ğŸ›’ **Order Details:**\n${order.orderDetails}\n` +
      (order.specialInstructions ? `\nğŸ’¬ **Special Notes:**\n${order.specialInstructions}\n` : '') +
      `\nâ° **Order Time:** ${order.timestamp}\n` +
      `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n` +
      `ğŸ“± **Business:** ${BUSINESS_SETTINGS.businessName}\n` +
      `â˜ï¸ **Contact:** ${BUSINESS_SETTINGS.phone}`;

    try {
      const response = await fetch('https://api.line.me/v2/bot/message/push', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${LINE_CONFIG.channelAccessToken}`
        },
        body: JSON.stringify({
          to: LINE_CONFIG.yourUserId,
          messages: [
            {
              type: 'text',
              text: message
            }
          ]
        })
      });

      if (response.ok) {
        console.log('âœ… LINE notification sent successfully');
        return true;
      } else {
        const error = await response.json();
        console.error('âŒ LINE API error:', error);
        return false;
      }
    } catch (error) {
      console.error('âŒ LINE notification error:', error);
      return false;
    }
  }

  // Also save orders to localStorage as backup
  function saveOrderToLocalStorage(order) {
    try {
      const orders = JSON.parse(localStorage.getItem('deshi_orders') || '[]');
      const orderWithId = {
        ...order,
        id: Date.now(),
        status: 'pending'
      };
      orders.unshift(orderWithId);
      localStorage.setItem('deshi_orders', JSON.stringify(orders));
      console.log('âœ… Order saved to localStorage');
      return true;
    } catch (error) {
      console.error('âŒ Error saving to localStorage:', error);
      return false;
    }
  }

  // Update display with menu and settings
  function updateDisplay() {
    // Menu
    document.getElementById('wed-name-display').textContent = MENU_DATA.wednesday.name;
    document.getElementById('wed-desc-display').textContent = MENU_DATA.wednesday.desc;
    document.getElementById('wed-price-display').textContent = 'Â¥' + MENU_DATA.wednesday.price.toLocaleString();
    document.getElementById('wed-emoji-display').textContent = MENU_DATA.wednesday.emoji;
    
    document.getElementById('sat-name-display').textContent = MENU_DATA.saturday.name;
    document.getElementById('sat-desc-display').textContent = MENU_DATA.saturday.desc;
    document.getElementById('sat-price-display').textContent = 'Â¥' + MENU_DATA.saturday.price.toLocaleString();
    document.getElementById('sat-emoji-display').textContent = MENU_DATA.saturday.emoji;
    
    // Settings
    document.getElementById('displayBusinessName').textContent = BUSINESS_SETTINGS.businessName.toUpperCase();
    document.getElementById('footerBusinessName').textContent = BUSINESS_SETTINGS.businessName;
    document.getElementById('displayOrderDays').textContent = BUSINESS_SETTINGS.orderDays;
    document.getElementById('displayEmail').textContent = BUSINESS_SETTINGS.email;
    document.getElementById('displayEmail').href = 'mailto:' + BUSINESS_SETTINGS.email;
    document.getElementById('displayPhone').textContent = BUSINESS_SETTINGS.phone;
  }

  // Admin/Setup button
  document.getElementById('adminBtn').addEventListener('click', () => {
    document.getElementById('setupModal').classList.add('active');
  });

  document.getElementById('closeSetup').addEventListener('click', () => {
    document.getElementById('setupModal').classList.remove('active');
  });

  document.getElementById('closeSetupBtn').addEventListener('click', () => {
    document.getElementById('setupModal').classList.remove('active');
  });

  // LINE contact button
  document.getElementById('lineContactBtn').addEventListener('click', () => {
    if (LINE_CONFIG.lineOfficialLink) {
      window.open(LINE_CONFIG.lineOfficialLink, '_blank');
    } else {
      alert('You can contact us at:\n\nğŸ“ Phone: ' + BUSINESS_SETTINGS.phone + '\nğŸ“§ Email: ' + BUSINESS_SETTINGS.email + '\n\nOr message our LINE account directly!');
    }
  });

  // Order form submission
  document.getElementById('orderForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'â³ Sending to LINE...';
    submitBtn.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
    
    const formData = new FormData(e.target);
    const order = {
      customerName: formData.get('customerName'),
      customerEmail: formData.get('customerEmail'),
      customerPhone: formData.get('customerPhone'),
      deliveryDay: formData.get('deliveryDay'),
      deliveryAddress: formData.get('deliveryAddress'),
      orderDetails: formData.get('orderDetails'),
      specialInstructions: formData.get('specialInstructions') || 'None',
      timestamp: new Date().toLocaleString('ja-JP', { 
        timeZone: 'Asia/Tokyo',
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      })
    };

    // Validate required fields
    if (!order.customerName || !order.customerEmail || !order.customerPhone || !order.deliveryDay || !order.deliveryAddress || !order.orderDetails) {
      alert('âŒ Please fill all required fields marked with *');
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
      return;
    }

    // Validate email format
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(order.customerEmail)) {
      alert('âŒ Please enter a valid email address');
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
      return;
    }

    // Validate phone number (Japanese format)
    const phoneRegex = /^[\d\s\-\+\(\)]{10,20}$/;
    if (!phoneRegex.test(order.customerPhone.replace(/\s/g, ''))) {
      alert('âŒ Please enter a valid phone number');
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
      return;
    }

    // Save to localStorage (backup)
    saveOrderToLocalStorage(order);

    // Send to LINE
    const lineSent = await sendLineNotification(order);
    
    if (lineSent) {
      // Success animation
      submitBtn.textContent = 'âœ… Order Sent!';
      submitBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
      
      setTimeout(() => {
        submitBtn.textContent = originalText;
        submitBtn.style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
        submitBtn.disabled = false;
        
        e.target.reset();
        
        alert('ğŸ‰ Order submitted successfully!\n\nâœ… You will receive a LINE notification immediately.\nğŸ“ We will contact you at ' + order.customerPhone + ' to confirm your order.\n\nThank you for choosing ' + BUSINESS_SETTINGS.businessName + '!');
      }, 1500);
    } else {
      // Fallback
      submitBtn.textContent = 'âš ï¸ Saved Locally';
      submitBtn.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
      
      setTimeout(() => {
        submitBtn.textContent = originalText;
        submitBtn.style.background = 'linear-gradient(135deg, #ea580c, #dc2626)';
        submitBtn.disabled = false;
        
        e.target.reset();
        
        alert('âœ… Order saved locally!\n\nâš ï¸ LINE notification failed. Please contact us directly:\n\nğŸ“ Phone: ' + BUSINESS_SETTINGS.phone + '\nğŸ“§ Email: ' + BUSINESS_SETTINGS.email + '\n\nWe will contact you soon to confirm your order.');
      }, 1500);
    }
  });

  // Show setup guide on first visit
  window.addEventListener('load', () => {
    console.log('ğŸš€ Deshi Cuisine Website Loaded');
    console.log('ğŸ“± LINE Configuration:', isLineConfigured ? 'âœ… Ready' : 'âŒ Not configured');
    
    updateDisplay();
    
    // Show welcome message if LINE is configured
    if (isLineConfigured) {
      console.log('âœ… LINE Bot is ready! Orders will be sent to your LINE account.');
    } else {
      console.log('âš ï¸ LINE Bot not configured. Click the âš™ï¸ button to setup.');
    }
  });
</script>
